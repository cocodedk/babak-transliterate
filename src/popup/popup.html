<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="popup-base.css">
  <link rel="stylesheet" href="popup-components.css">
</head>
<body>
  <div class="app">
    <header class="app-header">
      <div class="logo">
        <span class="logo-icon">ğŸ¨</span>
        <h1>AI Transliterator</h1>
      </div>
      <div class="header-actions">
        <button class="detach-btn" title="Open in separate window (won't close accidentally)">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M9 2H14V7L12.5 5.5L9.5 8.5L7.5 6.5L10.5 3.5L9 2Z"/>
            <path d="M4 4H7V5.5H4C3.72 5.5 3.5 5.72 3.5 6V12C3.5 12.28 3.72 12.5 4 12.5H10C10.28 12.5 10.5 12.28 10.5 12V9H12V12C12 13.1 11.1 14 10 14H4C2.9 14 2 13.1 2 12V6C2 4.9 2.9 4 4 4Z"/>
          </svg>
        </button>
        <button class="about-btn" type="button" title="About" aria-label="About">â„¹ï¸</button>
        <button class="settings-btn" title="Settings">âš™ï¸</button>
      </div>
    </header>
    
    <nav class="tabs">
      <button class="tab active" data-tab="transliterate">Transliterate</button>
      <button class="tab" data-tab="ascii">ASCII Art</button>
      <button class="tab" data-tab="history">History</button>
    </nav>
    
    <main class="content">
      <section id="transliterate-tab" class="tab-content active">
        <div class="input-area">
          <label>Type text to convert to Persian</label>
          <textarea id="transliterate-input" placeholder="e.g., salam, khodafez..." rows="2"></textarea>
          
          <div class="mode-toggle">
            <label class="toggle-label">
              <input type="checkbox" id="translate-mode">
              <span class="toggle-text">Translate (meaning) instead of Transliterate (sounds)</span>
            </label>
          </div>
          
          <button id="transliterate-btn" class="primary-btn">
            <span class="btn-text">Transliterate to Persian</span>
          </button>
        </div>
        
        <div id="transliterate-result-area" class="result-area hidden" aria-busy="false">
          <div class="result-header">
            <div class="result-title">
              <span id="result-label">Persian Result</span>
              <span id="transliterate-status" class="result-status" aria-live="polite"></span>
            </div>
            <button id="stop-transliterate-btn" class="icon-btn stop-btn hidden" title="Stop">â¹ï¸</button>
            <button id="copy-transliterate-btn" class="icon-btn" title="Copy">ğŸ“‹</button>
          </div>
          <div id="transliterate-reasoning" class="reasoning-display hidden"></div>
          <div id="transliterate-result" class="transliterated-output"></div>
        </div>
      </section>

      <section id="ascii-tab" class="tab-content">
        <div class="input-area">
          <label>What would you like to see in ASCII?</label>
          <textarea id="ascii-input" placeholder="e.g., A cat playing piano..." rows="2"></textarea>
          <button id="generate-btn" class="primary-btn">
            <span class="btn-text">Generate Art</span>
          </button>
        </div>
        
        <div id="result-area" class="result-area hidden" aria-busy="false">
          <div class="result-header">
            <div class="result-title">
              <span>Your ASCII Art</span>
              <span id="ascii-status" class="result-status" aria-live="polite"></span>
            </div>
            <button id="stop-ascii-btn" class="icon-btn stop-btn hidden" title="Stop">â¹ï¸</button>
            <button id="copy-btn" class="icon-btn" title="Copy">ğŸ“‹</button>
          </div>
          <div id="ascii-reasoning" class="reasoning-display hidden"></div>
          <pre id="ascii-result" class="ascii-output"></pre>
        </div>
      </section>
      
      <section id="history-tab" class="tab-content">
        <div class="history-header">
          <span class="history-title">History</span>
          <button id="clear-history-btn" class="ghost-btn" title="Clear all history">Clear All</button>
        </div>
        <div id="chat-history" class="chat-history">
          <div class="empty-state">
            <span class="empty-icon">ğŸ’¬</span>
            <p>No conversations yet</p>
            <p class="empty-sub">Start chatting to see history</p>
          </div>
        </div>
      </section>
    </main>
  </div>

  <div id="about-modal" class="about-modal hidden" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="about-title">
    <div class="about-card" role="document">
      <div class="about-header">
        <div class="about-title-wrap">
          <span class="about-icon">â„¹ï¸</span>
          <h2 id="about-title">About</h2>
        </div>
        <button id="about-close" class="about-close" type="button" aria-label="Close">âœ•</button>
      </div>
      <div class="about-content">
        <p id="about-name" class="about-name">AI Transliterator & ASCII Art</p>
        <p id="about-description" class="about-tagline">Transliterate Latin text to Persian and generate ASCII art with AI.</p>
        <div class="about-grid">
          <div class="about-row">
            <span class="about-label">Author</span>
            <span class="about-value">Babak Bandpey</span>
          </div>
          <div class="about-row">
            <span class="about-label">Website</span>
            <span class="about-value"><a href="https://cocode.dk" target="_blank" rel="noreferrer">cocode.dk</a></span>
          </div>
          <div class="about-row">
            <span class="about-label">Repository</span>
            <span class="about-value">
              <a href="https://github.com/cocodedk/babak-transliterate" target="_blank" rel="noreferrer">https://github.com/cocodedk/babak-transliterate</a>
            </span>
          </div>
          <div class="about-row">
            <span class="about-label">Version</span>
            <span id="about-version" class="about-value">1.0.0</span>
          </div>
          <div class="about-row">
            <span class="about-label">License</span>
            <span class="about-value">MIT</span>
          </div>
        </div>
        <p class="about-disclaimer">Provided "as is" without warranty.</p>
      </div>
    </div>
  </div>
  
  <script type="module" src="popup.js"></script>
</body>
</html>
